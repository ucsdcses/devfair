<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="css/vendor/fluidbox.min.css">
	<link rel="stylesheet" href="css/main.css">

	<script type="text/javascript"
	 src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	 <script src="https://www.google.com/recaptcha/api.js" async defer></script>

	<title>Dev Fair</title>

</head>
<body id="boday">

	<header id="navheader" class="navheader">

		<div id="logo-container">
			<div id="logo"><a id="CSES" href="index.html">UCSD CSES</a></div>
		</div>
 		<nav>
			<ul>
				<li><a href="http://cses.ucsd.edu/devfair">Home</a></li>
				<li><a href="http://cses.ucsd.edu/devfair/info.html">About</a></li>
				<li><a href="http://cses.ucsd.edu/devfair/signup.html">Sign Up</a></li> 
				<li><a href="mailto:cses@cses.ucsd.edu">Contact</a></li>
			</ul>
		</nav>

	</header>

	<div id="content">
		<section class="intro">
			<h1> Group Signup:</h1>
			      <form class='signup' id='signupForm' enctype="multipart/form-data">
				 <fieldset>
				    <label for="projectname"><h2>Project Name:</h2></label>
				    <input type="text" id="projectname" name="projectname" placeholder="Name of Project Here" />
				    <label for="projectdesc"><h2>Project Description:</h2></label>
				    <textarea type="text" id="projectdesc" name="projectdesc" /></textarea>
				    <label for="name"><h2>Team Members:</h2></label>
				    <div id="boxer" class="teammate-box">
					    <h2>&nbsp;1.</h2>
					    <input type="text" id="name" name="name" placeholder="Firstname Lastname" />
					    <input type="email" id="email" name="email" placeholder="Email address" />
					    <input type="text" id="additional" name="additional" placeholder="Additional Contact Info" />
					    <input type="text" id="role" name="role" placeholder="Role in Team" />
				    </div>
				    <input class='btn a-r' type="button" id="add-teammate" value="Add Teammate" />
				    <input class='btn a-r' type="button" id="remove-teammate" value="Remove Teammate" />
				    <br>
				    <div class="g-recaptcha captcha-float" data-sitekey="6LcrkSYTAAAAAIVEioWHxLSw03E29WFS5ahdRTmm"></div>
				    
				    <input class='btn' type="submit" value="Create Team" />
				 </fieldset>
			      </form>
		</section>
		<section class="row">
			<div class="col">
				<h2><a href="http://cses.ucsd.edu/devfair">Return to main page</a></h2>
			</div>
		</section>
 
	</div>

	<script>
	if (!window.jQuery) 
	{
	    document.write('<script src="js/vendor/jquery.1.11.min.js"><\/script>');
	}
	var counter = 0;
	var textarea = document.getElementById("projectdesc");
	var heightLimit = 200; /* Maximum height: 200px */

	textarea.oninput = function() {
		  textarea.style.height = ""; /* Reset the height*/
		  textarea.style.height = Math.min(textarea.scrollHeight, heightLimit) + "px";
	};

	$('#add-teammate').click(function(){
		if ( counter < 9 ) {
			target = '#boxer' + (counter - 1);
			if ( counter == 0 ) {
				count = counter + 2
				$( '#boxer' ).after( '<div id="boxer'+ counter +'" class="teammate-box"><h2>&nbsp;'+count+'.</h2><input type="text" id="name" name="name" placeholder="Firstname Lastname" /><input type="email" id="email" name="email" placeholder="Email address" /><input type="text" id="additional" name="additional" placeholder="Additional Contact Info" /><input type="text" id="role" name="role" placeholder="Role in Team" /></div>' );
				counter = counter + 1;
			} else {
				count = counter + 2
				$( target ).after( '<div id="boxer'+ counter +'" class="teammate-box"><h2>&nbsp;'+count+'.</h2><input type="text" id="name" name="name" placeholder="Firstname Lastname" /><input type="email" id="email" name="email" placeholder="Email address" /><input type="text" id="additional" name="additional" placeholder="Additional Contact Info" /><input type="text" id="role" name="role" placeholder="Role in Team" /></div>' );
				counter = counter + 1;
			}
		}

	});
	$('#remove-teammate').click(function(){
		if ( counter > 0 ) {
			target = '#boxer' + (counter - 1);
			$(target).remove( );
			counter = counter - 1;
		}

	});

	$('#signupForm').submit(function(e){
    		e.preventDefault();
    		$.ajax({
        		url:'/devFairSignup',
        		type:'post',
			data:$('#signupForm').serialize(),
        		success:function( res ){
			    if ( res.success == 'false' ) { 
				    alert( "Recaptcha Failed, please try again." );

		            }
			    else {
				    document.getElementById("navheader").remove();
				    document.getElementById("content").remove();
				    $("#boday").fadeOut( 0 );
				    $("#boday").append("<div id='content'><section class='intro'><h1>Submitted!</h1></section></div>");
				    $("#boday").fadeIn( 1000 );
				    $("#boday").fadeOut( 1000 );
				    setTimeout( function() {
					    window.location.replace( "http://cses.ucsd.edu/devfair" );

				    }, 2000);
			    }
       		 }
    		});
	});

	</script>
	<!-- <script>
	window.setInterval(function () {
	    document.getElementById( "CSES" ).style.color = '#'+Math.floor(Math.random()*16777215).toString(16);
	}, 3000);

	</script> -->

	<script src="js/vendor/jquery.fluidbox.min.js"></script>
	<script src="js/main.js"></script>

</body>
</html>

